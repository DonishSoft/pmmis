@model PMMIS.Domain.Entities.Indicator
@{
    ViewData["Title"] = "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var categories = ViewBag.Categories as List<PMMIS.Domain.Entities.IndicatorCategory> ?? new List<PMMIS.Domain.Entities.IndicatorCategory>();
    var parentIndicators = ViewBag.ParentIndicators as List<PMMIS.Domain.Entities.Indicator> ?? new List<PMMIS.Domain.Entities.Indicator>();
}

<div class="container-fluid">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-action="Index">–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã</a></li>
            <li class="breadcrumb-item active">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-lg-8">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white">
                    <h5 class="card-title mb-0"><i class="bi bi-pencil me-2"></i>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä</h5>
                </div>
                <div class="card-body">
                    <form asp-action="Edit" method="post">
                        <input type="hidden" asp-for="Id" />
                        
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label class="form-label">–ö–æ–¥ <span class="text-danger">*</span></label>
                                <input asp-for="Code" class="form-control" required />
                                <span asp-validation-for="Code" class="text-danger"></span>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">‚Ññ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</label>
                                <input asp-for="SortOrder" type="number" class="form-control" />
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">–ï–¥. –∏–∑–º–µ—Ä–µ–Ω–∏—è</label>
                                <input asp-for="Unit" class="form-control" data-val-required="" />
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">–¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</label>
                                <input asp-for="TargetValue" type="number" step="0.01" class="form-control" />
                            </div>
                        </div>

                        <div class="row g-3 mt-3">
                            <div class="col-md-4">
                                <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                <select asp-for="CategoryId" class="form-select">
                                    <option value="">‚Äî –ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Äî</option>
                                    @foreach (var cat in categories)
                                    {
                                        <option value="@cat.Id">@cat.Name</option>
                                    }
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">–¢–∏–ø –∏–∑–º–µ—Ä–µ–Ω–∏—è</label>
                                <select asp-for="MeasurementType" class="form-select">
                                    <option value="@PMMIS.Domain.Entities.MeasurementType.Number">–ß–∏—Å–ª–æ</option>
                                    <option value="@PMMIS.Domain.Entities.MeasurementType.Percentage">–ü—Ä–æ—Ü–µ–Ω—Ç (%)</option>
                                    <option value="@PMMIS.Domain.Entities.MeasurementType.YesNo">–î–∞/–ù–µ—Ç</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä</label>
                                <select asp-for="ParentIndicatorId" class="form-select">
                                    <option value="">‚Äî –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä ‚Äî</option>
                                    @foreach (var parent in parentIndicators)
                                    {
                                        <option value="@parent.Id">@parent.Code: @parent.NameRu</option>
                                    }
                                </select>
                            </div>
                        </div>

                        <div class="row g-3 mt-3">
                            <div class="col-md-6">
                                <label class="form-label"><i class="bi bi-geo-alt me-1"></i>–ò—Å—Ç–æ—á–Ω–∏–∫ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö</label>
                                <select asp-for="GeoDataSource" class="form-select">
                                    <option value="@PMMIS.Domain.Entities.GeoDataSource.None">‚Äî –ù–µ —Å–≤—è–∑–∞–Ω —Å –≥–µ–æ–≥—Ä–∞—Ñ–∏–µ–π ‚Äî</option>
                                    <option value="@PMMIS.Domain.Entities.GeoDataSource.Population">üèòÔ∏è –ù–∞—Å–µ–ª–µ–Ω–∏–µ (—Ç–µ–∫—É—â–µ–µ)</option>
                                    <option value="@PMMIS.Domain.Entities.GeoDataSource.FemalePopulation">üë© –ñ–µ–Ω—Å–∫–æ–µ –Ω–∞—Å–µ–ª–µ–Ω–∏–µ</option>
                                    <option value="@PMMIS.Domain.Entities.GeoDataSource.Households">üè† –î–æ–º–æ—Ö–æ–∑—è–π—Å—Ç–≤–∞</option>
                                    <option value="@PMMIS.Domain.Entities.GeoDataSource.SchoolCount">üè´ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∫–æ–ª</option>
                                    <option value="@PMMIS.Domain.Entities.GeoDataSource.HealthFacilityCount">üè• –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ–¥—É—á—Ä–µ–∂–¥–µ–Ω–∏–π</option>
                                    <option value="@PMMIS.Domain.Entities.GeoDataSource.SchoolStudents">üéì –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–µ–Ω–∏–∫–æ–≤</option>
                                </select>
                                <small class="text-muted">–ï—Å–ª–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–≤—è–∑–∞–Ω —Å –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –ø—Ä–∏ –ø—Ä–∏–≤—è–∑–∫–µ –∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –≤—ã–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—ë–ª–∞</small>
                            </div>
                        </div>
                        <hr class="my-4" />
                        <h6 class="text-muted mb-3"><i class="bi bi-translate me-2"></i>–ù–∞–∑–≤–∞–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞</h6>

                        <div class="row g-3">
                            <div class="col-md-12">
                                <label class="form-label">üá∑üá∫ –†—É—Å—Å–∫–∏–π <span class="text-danger">*</span></label>
                                <input asp-for="NameRu" class="form-control" required />
                            </div>
                            <div class="col-md-12">
                                <label class="form-label">üáπüáØ –¢–æ“∑–∏–∫”£</label>
                                <input asp-for="NameTj" class="form-control" data-val-required="" />
                            </div>
                            <div class="col-md-12">
                                <label class="form-label">üá∫üá∏ English</label>
                                <input asp-for="NameEn" class="form-control" data-val-required="" />
                            </div>
                        </div>

                        <hr class="my-4" />

                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-check-lg me-1"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                            </button>
                            <a asp-action="Values" asp-route-indicatorId="@Model.Id" class="btn btn-outline-info">
                                <i class="bi bi-list-ol me-1"></i> –ó–Ω–∞—á–µ–Ω–∏—è
                            </a>
                            <a asp-action="Index" class="btn btn-outline-secondary">–û—Ç–º–µ–Ω–∞</a>
                        </div>
                    </form>
                </div>
                <div class="card-footer bg-white">
                    <form asp-action="Delete" asp-route-id="@Model.Id" method="post" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏ –≤—Å–µ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è?')">
                        <button type="submit" class="btn btn-outline-danger btn-sm">
                            <i class="bi bi-trash me-1"></i> –£–¥–∞–ª–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
